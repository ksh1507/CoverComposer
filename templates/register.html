<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Register - CoverComposer</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body class="dark">

<div class="theme-toggle" id="themeToggle" style="top: 28px;">ðŸŒ™</div>

<div class="container page-enter">
  <div class="card">
    <div class="brand small" style="position:static; margin-bottom: 20px;">
      <span class="logo-text">CoverComposer</span>
    </div>

    <h2 class="headline">Create Account</h2>
    <p class="subtitle">Start your AI music journey</p>

    <div id="messageBox" style="color: #ff5555; margin-bottom: 15px; font-size: 14px; display: none;"></div>

    <form action="/register" method="post">
      <label>ðŸ‘¤ Choose Username</label>
      <input type="text" name="username" required placeholder="Pick a unique username">

      <label>ðŸ”’ Choose Password</label>
      <input type="password" name="password" required placeholder="Pick a strong password">

      <button class="primary">Sign Up</button>
    </form>

    <div style="margin-top: 20px; font-size: 14px; opacity: 0.7;">
      Already have an account? <a href="/login" style="color: var(--green); text-decoration: none;">Login here</a>
    </div>
  </div>
</div>

<script>
  // 1. Handle Messages
  const params = new URLSearchParams(window.location.search);
  const msgBox = document.getElementById('messageBox');
  
  if (params.has('error')) {
    msgBox.textContent = params.get('error');
    msgBox.style.display = 'block';
  }

  // 2. Theme Toggle Logic
  const savedTheme = localStorage.getItem('theme') || 'dark';
  document.body.className = savedTheme;
  const toggle = document.getElementById("themeToggle");
  toggle.textContent = savedTheme === 'dark' ? "ðŸŒ™" : "â˜€";

  toggle.onclick = () => {
    const isDark = document.body.classList.contains('dark');
    if (isDark) {
      document.body.classList.replace('dark', 'light');
      localStorage.setItem('theme', 'light');
      toggle.textContent = "â˜€";
    } else {
      document.body.classList.replace('light', 'dark');
      localStorage.setItem('theme', 'dark');
      toggle.textContent = "ðŸŒ™";
    }
  };
</script>

</body>
</html>